<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Language" content="zh-cn" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title><?echo $config['default_title'];?></title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link href="<?php echo $base_href;?>../assets/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
<link href="<?php echo $base_href;?>../assets/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" />
<link href="<?php echo $base_href;?>../assets/css/docs.css" rel="stylesheet" />
<style type="text/css">
.bs-docs-sidenav.affix{top: <?php echo $config['page_top']?(int)$config['page_top']:10;?>px;}
.bs-docs-sidenav.affix-bottom{bottom: <?php echo $config['page_bottom']?(int)$config['page_bottom']:10;?>px;}
@media (min-width: 768px) and (max-width: 979px) {
  .bs-docs-sidenav.affix {
    top: 0;
    width: 200px;
  }
}
</style>
<script src="<?php echo $base_href;?>../assets/js/jquery-1.9.1.min.js" type="text/javascript"></script>
<script type="text/javascript" src="<?php echo $base_href;?>../assets/bootstrap/js/bootstrap.min.js"></script>
</head>
<body data-spy="scroll" data-target=".bs-docs-sidebar">
<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="brand" href="http://www.myqee.com/">MyQEE</a>
        <div class="nav-collapse collapse">
            <ul class="nav">
                <li<?php if ($type=='manual')echo ' class="active"';?>><a href="<?php echo $base_href;?>index.html"><?php echo __('Manual index');?></a></li>
                <li<?php if ($type=='core')echo ' class="active"';?>><a href="<?php echo $base_href;?>core/index.html"><?php echo __('Core manual');?></a></li>
                <li class="dropdown<?php if ($type=='library')echo ' active';?>">
                    <a href="javascript:" class="dropdown-toggle" data-toggle="dropdown"><?php echo __('Libray manual');?> <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <?php
                    if ($libraries)foreach ($libraries as $lib => $libdir)
                    {
                        $current_lib = current($libdir);
                        echo '<li class="dropdown-submenu" tabindex="-1"><a href="'.$base_href.'library/'.$lib.'/'.$current_lib.'/index.html">'.$lib.'</a>';
                        echo '<ul class="dropdown-menu">';
                        foreach ($libdir as $dir)
                        {
                            echo '<li'.($libray==$lib.'.'.$dir?'  class="active"':'').'><a href="'.$base_href.'library/'.$lib.'/'.$dir.'/index.html">'.$dir.'</a></li>';
                        }
                        echo '</ul></li>';
                    }
                    ?>
                    </ul>
                </li>
                <?php
                if ($projects)
                {
                ?>
                <li class="dropdown<?php if ($type=='project')echo ' active';?>">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><?php echo __('Project manual');?> <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    <?php
                    foreach ($projects as $key => $value)
                    {
                        echo '<li'.($project==$value?'  class="active"':'').'><a href="'.$base_href.'project/'.$key.'/index.html">'.$value.'</a></li>';
                    }
                    ?>
                    </ul>
                </li>
                <?php
                }
                ?>
                <li<?php if ($type=='team')echo ' class="active"';?>><a href="<?php echo $base_href;?>team/index.html"><?php echo __('Team library manual');?></a></li>
            </ul>
        </div>
    </div>
</div>

<div class="container-fluid">
<div class="row-fluid">

<div class="left-div bs-docs-sidebar">
    <div class="bs-docs-sidenav">
    <?php
    echo $menu_html;
    /*
    <ul class="nav nav-list bs-docs-sidenav">
        <li class="active"><a href="#download-bootstrap"><i class="icon-chevron-right"></i> 欢迎使用</a></li>
        <li><a href="#file-structure"><i class="icon-chevron-right"></i> 入门指引</a></li>
        <li><a href="#contents"><i class="icon-chevron-right"></i> 安装与配置</a></li>
        <li><a href="#examples"><i class="icon-chevron-right"></i> 感谢</a></li>
        <li>
            <a href="#html-template"><i class="icon-chevron-right"></i> 特点</a>
            <ul class="nav nav-list">
                <li ><a href="#download-bootstrap"><i class="icon-chevron-right"></i> 欢迎使用</a></li>
                <li><a href="#file-structure"><i class="icon-chevron-right"></i> 入门指引</a></li>
                <li><a href="#contents"><i class="icon-chevron-right"></i> 安装与配置</a></li>
                <li><a href="#html-template"><i class="icon-chevron-right"></i> 特点</a></li>
                <li><a href="#examples"><i class="icon-chevron-right"></i> 感谢</a></li>
            </ul>
        </li>
    </ul>
    */
    ?>
    </div>
</div>

<script type="text/javascript">
(function()
{
    // 防止左侧菜单太长
    $(window).resize(function(){
        $('.bs-docs-sidenav').css('maxHeight', $(window).height()-<?php echo (int)$config['page_top'];?>);
    }).trigger('resize');

    // 优化滚动菜单后切换页面
    if (localStorage)
    {
        var url = document.location.href.split('#')[0].split('?')[0];
        var path = url.substr(0, url.lastIndexOf('/')+1);

        var scroll = localStorage.getItem('left-div-scroll');
        if (scroll)
        {
            scroll = scroll.split('|');
            if (scroll[0] == path)
            {
                $('.bs-docs-sidenav').scrollTop(scroll[1]);
            }
        }

        var tm = null;
        $('.bs-docs-sidenav').bind('scroll', function(){
            if (tm)
            {
                clearTimeout(tm);
                tm = null;
            }

            var top = this.scrollTop;
            tm = setTimeout(function(){
                localStorage.setItem('left-div-scroll', path+'|'+top);
            },50);
        });
    }

    // 处理menu相关代码
    var href = document.location.href.split('#')[0].split('?')[0];
    $('.left-div a').each(function(){
        if (this.href==href)
        {
            $(this.parentNode).addClass('active');
        }
        this.innerHTML = '<div class="left-menu-i-div"><i class="icon-chevron-right"></i></div>'+this.innerHTML;
    });
    $('.left-div .top-menu i').addClass('icon-chevron-up');

    $('.left-div ul').each(function(){
        var i = 0;
        $(this).children('li').each(function(){
        if (this.getElementsByTagName('A').length==0)
        {
            if (i==0)
            {
                this.innerHTML = '<a href="javascript:" class="text menu_title">'+this.innerHTML+'</a>';
            }
            else
            {
                this.innerHTML = '<a href="javascript:" class="text">'+this.innerHTML+'</a>';
            }
        }
        i++;
    });
    });

    $('.bs-docs-sidenav li.active > a > .badge-info').removeClass('badge-info').addClass('badge-important');

    // 处理缩进
    var pd = function(obj, nn){
        obj.children('li').each(function(){
            var oo = $(this);
            if (nn>0)
            {
                oo.children('a').css('paddingLeft', (nn+1)+'em');
            }
            pd(oo.children('ul'), nn+1);
        });
    }
    pd($('.bs-docs-sidenav > ul'), 0);

    $('.left-div hr').remove();
})();

(function()
{
    var t = $(window).width() <= 980 ? 70 : 0;
    $(window).bind('resize',function(){t=$(window).width()<=980?70:0;});

    setTimeout(function (){
        $('.bs-docs-sidenav').affix({offset: {top: function(){return t;}, bottom: <?php echo $config['page_bottom']?(int)$config['page_bottom']:10;?>}})
    }, 100);
})();
</script>
<div class="right-div">
    <div class="right-clear"></div>
    <div class="prev-next-div"></div>

    <div class="change-lang-div">
        <div id="page-last-edit-div"></div>
        <?php echo __('View this page in');?> :
        <?php
            echo '<select id="lang_select">';
            if ($config['lang'])foreach ($config['lang'] as $k=>$v)
            {

                echo '<option value="'.$k.'"'.($lang==$k?' selected="selected"':'').'>'.$v.'</option>';
            }
            echo '</select>';
        ?>
        <a href="<?php echo $base_href?$base_href:'./';?>" id="base_href_test_a" style="display:none;"></a>
        <button onclick="document.location.href='<?php echo $base_href;?>../'+$('#lang_select')[0].value+'/'+document.location.href.substring($('#base_href_test_a')[0].href.length);" class="btn btn-info btn-mini" type="button"><i class="icon-arrow-right icon-white"></i></button>
        <div class="right-clear"></div>
    </div>